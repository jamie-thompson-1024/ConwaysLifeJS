!function(i,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e=t();for(var h in e)("object"==typeof exports?exports:i)[h]=e[h]}}(global,(function(){return(()=>{"use strict";var i={d:(t,e)=>{for(var h in e)i.o(e,h)&&!i.o(t,h)&&Object.defineProperty(t,h,{enumerable:!0,get:e[h]})},o:(i,t)=>Object.prototype.hasOwnProperty.call(i,t)},t={};i.d(t,{default:()=>s});const e=["empty","filled"];function h(i){return e.includes(i)}const s=class{constructor(i={}){this._grid=[],this._width=100,this._height=100,this._tickDelay=500,this._edgeMode="empty",this._initialGrid=[],this._age=0,this._lastTickTime=performance.now(),this._lastTickDuration=0,this._doLoop=!1,this.onTick=()=>{},i.width&&i.width>0&&(this._width=Math.floor(i.width)),i.height&&i.height>0&&(this._height=Math.floor(i.height)),i.tickDelay&&i.tickDelay>0&&(this._tickDelay=i.tickDelay),h(i.edgeMode)&&(this._edgeMode=i.edgeMode),this._resetInitialGrid(),this._resetGrid()}get grid(){return this._grid}get width(){return this._width}get height(){return this._height}get tickDelay(){return this._tickDelay}get edgeMode(){return this._edgeMode}get initialGrid(){return this._initialGrid}get age(){return this._age}get lastTickDuration(){return this._lastTickDuration}run(){this._doLoop=!0,this._loopInterval=setInterval((()=>{this._tick()}),this._tickDelay)}pause(){this._doLoop=!1,clearInterval(this._loopInterval)}reset(){this._resetGrid(),this._age=0}step(){this._tick(!0)}place(i,t,e){let h=i[0].length,s=i.length,r=t<0?0:t,l=e<0?0:e,d=t+h>this._width?this._width:t+h,o=e+s>this._height?this._height:e+s;for(let h=l;h<o;h++)for(let s=r;s<d;s++)this._grid[h][s]=i[h-e][s-t]}setCell(i,t,e){i>=this._width||i<0||t>=this._height||t<0||(this._grid[t][i]=!!e)}setInitial(){for(let i=0;i<this._height;i++)for(let t=0;t<this._width;t++)this._initialGrid[i][t]=this._grid[i][t]}resetInitial(){this._resetInitialGrid()}setOptions(i){let t=!1;i.width&&i.width>0&&(this._width=Math.floor(i.width),t=!0),i.height&&i.height>0&&(this._height=Math.floor(i.height),t=!0),i.tickDelay&&i.tickDelay>0&&(this._tickDelay=i.tickDelay,this._doLoop&&(clearInterval(this._loopInterval),this._loopInterval=setInterval((()=>{this._tick()}),this._tickDelay))),h(i.edgeMode)&&(this._edgeMode=i.edgeMode),t&&this._resizeGrids()}setOption(i,t){switch(i){case"width":t&&t>0&&(this._width=Math.floor(t),this._resizeGrids());break;case"height":t&&t>0&&(this._height=Math.floor(t),this._resizeGrids());break;case"edgeMode":h(t)&&(this._edgeMode=t);break;case"tickDelay":t&&t>0&&(this._tickDelay=t,this._doLoop&&(clearInterval(this._loopInterval),this._loopInterval=setInterval((()=>{this._tick()}),this._tickDelay)))}}_resetInitialGrid(){this._initialGrid=[];for(let i=0;i<this._height;i++){this._initialGrid[i]=[];for(let t=0;t<this._width;t++)this._initialGrid[i][t]=!1}}_resetGrid(){var i;this._grid=[];for(let t=0;t<this._height;t++){this._grid[t]=[];for(let e=0;e<this._width;e++)this._grid[t][e]=null!==(i=this._initialGrid[t][e])&&void 0!==i&&i}}_resizeGrids(){let i=this._initialGrid,t=this._grid;this._initialGrid=[],this._grid=[];let e=t[0].length<this._width?t[0].length:this._width,h=t.length<this._height?t.length:this._height;for(let s=0;s<this._height;s++){this._initialGrid[s]=[],this._grid[s]=[];for(let r=0;r<this._width;r++)s<h&&r<e?(this._initialGrid[s][r]=i[s][r],this._grid[s][r]=t[s][r]):(this._initialGrid[s][r]=!1,this._grid[s][r]=!1)}}_tick(i=!1){var t,e,h,s,r,l,d,o;if(!this._doLoop&&!i)return void clearInterval(this._loopInterval);this._lastTickTime=performance.now(),this._age++;let _,a=[],n=0;switch(this._edgeMode){case"empty":_=!1;break;case"filled":_=!0}for(let i=0;i<this._height;i++){a[i]=[];for(let g=0;g<this._width;g++)n=0,0!=i?((null!==(t=this._grid[i-1][g-1])&&void 0!==t?t:_)&&n++,(null!==(e=this._grid[i-1][g])&&void 0!==e?e:_)&&n++,(null!==(h=this._grid[i-1][g+1])&&void 0!==h?h:_)&&n++):_&&(n+=3),(null!==(s=this._grid[i][g-1])&&void 0!==s?s:_)&&n++,(null!==(r=this._grid[i][g+1])&&void 0!==r?r:_)&&n++,i!=this._height-1?((null!==(l=this._grid[i+1][g-1])&&void 0!==l?l:_)&&n++,(null!==(d=this._grid[i+1][g])&&void 0!==d?d:_)&&n++,(null!==(o=this._grid[i+1][g+1])&&void 0!==o?o:_)&&n++):_&&(n+=3),a[i][g]=2===n&&this._grid[i][g]||3===n}this._grid=a,this._lastTickDuration=performance.now()-this._lastTickTime,this.onTick()}};return t.default})()}));